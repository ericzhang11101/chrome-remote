(()=>{let e;chrome.runtime.onMessage.addListener((function(o,s,n){console.log("background.js got a message"),console.log(o),console.log(s),async function(){console.log("sending pt 1");const o={type:"message",key:e};chrome.tabs.query({active:!0,currentWindow:!0},(async function(e){console.log("sending message");const[s]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});console.log("tab"),console.log(s),chrome.tabs.sendMessage(s.id,o)}))}(),"deviceKey"===o.type?(e=o.value,console.log("got key: + key")):(o.type="keyRequest")&&n()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsIm1hcHBpbmdzIjoiTUFBQSxJQUFJQSxFQUVKQyxPQUFPQyxRQUFRQyxVQUFVQyxhQUNyQixTQUFTQyxFQUFTQyxFQUFRQyxHQUN0QkMsUUFBUUMsSUFBSSwrQkFDWkQsUUFBUUMsSUFBSUosR0FDWkcsUUFBUUMsSUFBSUgsR0FZcEJJLGlCQUNJRixRQUFRQyxJQUFJLGdCQUNaLE1BQU1FLEVBQVUsQ0FDWkMsS0FBTSxVQUNOWixPQUlKQyxPQUFPWSxLQUFLQyxNQUFNLENBQUNDLFFBQVEsRUFBTUMsZUFBZSxJQUFPTixlQUFlRyxHQUNsRUwsUUFBUUMsSUFBSSxtQkFHWixNQUFPUSxTQUFhaEIsT0FBT1ksS0FBS0MsTUFBTSxDQUFDQyxRQUFRLEVBQU1HLG1CQUFtQixJQUN4RVYsUUFBUUMsSUFBSSxPQUNaRCxRQUFRQyxJQUFJUSxHQUNaaEIsT0FBT1ksS0FBS00sWUFBWUYsRUFBSUcsR0FBSVQsRUFFcEMsR0FDSixDQTdCUVEsR0FDcUIsY0FBakJkLEVBQVFPLE1BQ1JaLEVBQU1LLEVBQVFnQixNQUNkYixRQUFRQyxJQUFJLG9CQUVQSixFQUFRTyxLQUFPLGVBQ3BCTCxHQUVSLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9iYWNrZ3JvdW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBrZXlcblxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKFxuICAgIGZ1bmN0aW9uKHJlcXVlc3QsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYmFja2dyb3VuZC5qcyBnb3QgYSBtZXNzYWdlXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZW5kZXIpO1xuICAgICAgICBzZW5kTWVzc2FnZSgpXG4gICAgICAgIGlmIChyZXF1ZXN0LnR5cGUgPT09IFwiZGV2aWNlS2V5XCIpe1xuICAgICAgICAgICAga2V5ID0gcmVxdWVzdC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3Qga2V5OiArIGtleScpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVxdWVzdC50eXBlID0gXCJrZXlSZXF1ZXN0XCIpe1xuICAgICAgICAgICAgc2VuZFJlc3BvbnNlKClcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbmFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlKCl7XG4gICAgY29uc29sZS5sb2coJ3NlbmRpbmcgcHQgMScpXG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICBrZXlcbiAgICB9XG5cbiAgICAvLyB0b2RvOiBrZWVwIHNlbmRpbmcgbWVzc2FnZSB1bnRpbCByZXNwb25zZVxuICAgIGNocm9tZS50YWJzLnF1ZXJ5KHthY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWV9LCBhc3luYyBmdW5jdGlvbih0YWJzKXtcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcgbWVzc2FnZScpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRhYnMpXG4gICAgICAgIC8vIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYnNbMF0uaWQsIG1lc3NhZ2UpOyAgXG4gICAgICAgIGNvbnN0IFt0YWJdID0gYXdhaXQgY2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTogdHJ1ZSwgbGFzdEZvY3VzZWRXaW5kb3c6IHRydWV9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RhYicpXG4gICAgICAgIGNvbnNvbGUubG9nKHRhYilcbiAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiLmlkLCBtZXNzYWdlKTtcbiAgICAgICAgLy8gY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjaHJvbWUudGFicy5zZW5kTWVzc2FnZSh0YWIuaWQsIG1lc3NhZ2UpO1xuICAgIH0pO1xufVxuXG4iXSwibmFtZXMiOlsia2V5IiwiY2hyb21lIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwicmVxdWVzdCIsInNlbmRlciIsInNlbmRSZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJhc3luYyIsIm1lc3NhZ2UiLCJ0eXBlIiwidGFicyIsInF1ZXJ5IiwiYWN0aXZlIiwiY3VycmVudFdpbmRvdyIsInRhYiIsImxhc3RGb2N1c2VkV2luZG93Iiwic2VuZE1lc3NhZ2UiLCJpZCIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==