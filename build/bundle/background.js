(()=>{let e;chrome.runtime.onMessage.addListener((function(o,s,n){console.log("background.js got a message"),console.log(o),console.log(s),async function(){let o=0;console.log("send message");const s=setInterval((()=>{console.log("sending pt "+o),o++;const n={type:"message",key:e};chrome.tabs.query({active:!0,currentWindow:!0},(async function(e){console.log("sending message");const[o]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});void 0!==o.id&&(console.log("tab"),console.log(o),await chrome.tabs.sendMessage(o.id,n),clearInterval(s))}))}),1e3)}(),"deviceKey"===o.type?(e=o.value,console.log("got key: "+e)):(o.type="keyRequest")&&n()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsIm1hcHBpbmdzIjoiTUFBQSxJQUFJQSxFQUVKQyxPQUFPQyxRQUFRQyxVQUFVQyxhQUNyQixTQUFTQyxFQUFTQyxFQUFRQyxHQUN0QkMsUUFBUUMsSUFBSSwrQkFDWkQsUUFBUUMsSUFBSUosR0FDWkcsUUFBUUMsSUFBSUgsR0FZcEJJLGlCQUNJLElBQUlDLEVBQVEsRUFFWkgsUUFBUUMsSUFBSSxnQkFFWixNQUFNRyxFQUFrQkMsYUFBWSxLQUNoQ0wsUUFBUUMsSUFBSSxjQUFnQkUsR0FDNUJBLElBRUEsTUFBTUcsRUFBVSxDQUNaQyxLQUFNLFVBQ05mLE9BSUpDLE9BQU9lLEtBQUtDLE1BQU0sQ0FBQ0MsUUFBUSxFQUFNQyxlQUFlLElBQU9ULGVBQWVNLEdBQ2xFUixRQUFRQyxJQUFJLG1CQUdaLE1BQU9XLFNBQWFuQixPQUFPZSxLQUFLQyxNQUFNLENBQUNDLFFBQVEsRUFBTUcsbUJBQW1CLFNBRXpEQyxJQUFYRixFQUFJRyxLQUNKZixRQUFRQyxJQUFJLE9BQ1pELFFBQVFDLElBQUlXLFNBQ05uQixPQUFPZSxLQUFLUSxZQUFZSixFQUFJRyxHQUFJVCxHQUV0Q1csY0FBY2IsR0FHdEIsR0FBRSxHQUVILElBRVAsQ0E1Q1FZLEdBQ3FCLGNBQWpCbkIsRUFBUVUsTUFDUmYsRUFBTUssRUFBUXFCLE1BQ2RsQixRQUFRQyxJQUFJLFlBQWNULEtBRXJCSyxFQUFRVSxLQUFPLGVBQ3BCUixHQUVSLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9iYWNrZ3JvdW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBrZXlcblxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKFxuICAgIGZ1bmN0aW9uKHJlcXVlc3QsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYmFja2dyb3VuZC5qcyBnb3QgYSBtZXNzYWdlXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZW5kZXIpO1xuICAgICAgICBzZW5kTWVzc2FnZSgpXG4gICAgICAgIGlmIChyZXF1ZXN0LnR5cGUgPT09IFwiZGV2aWNlS2V5XCIpe1xuICAgICAgICAgICAga2V5ID0gcmVxdWVzdC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3Qga2V5OiAnICsga2V5IClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXF1ZXN0LnR5cGUgPSBcImtleVJlcXVlc3RcIil7XG4gICAgICAgICAgICBzZW5kUmVzcG9uc2UoKVxuICAgICAgICB9XG4gICAgfVxuKTtcblxuYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKXtcbiAgICBsZXQgY291bnQgPSAwIFxuXG4gICAgY29uc29sZS5sb2coJ3NlbmQgbWVzc2FnZScpXG5cbiAgICBjb25zdCBtZXNzYWdlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZW5kaW5nIHB0ICcgKyBjb3VudClcbiAgICAgICAgY291bnQgKytcblxuICAgICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAga2V5XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gdG9kbzoga2VlcCBzZW5kaW5nIG1lc3NhZ2UgdW50aWwgcmVzcG9uc2VcbiAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZX0sIGFzeW5jIGZ1bmN0aW9uKHRhYnMpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcgbWVzc2FnZScpXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0YWJzKVxuICAgICAgICAgICAgLy8gY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFic1swXS5pZCwgbWVzc2FnZSk7ICBcbiAgICAgICAgICAgIGNvbnN0IFt0YWJdID0gYXdhaXQgY2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTogdHJ1ZSwgbGFzdEZvY3VzZWRXaW5kb3c6IHRydWV9KTtcblxuICAgICAgICAgICAgaWYgKHRhYi5pZCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGFiJylcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0YWIpXG4gICAgICAgICAgICAgICAgYXdhaXQgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiLmlkLCBtZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobWVzc2FnZUludGVydmFsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuXG4gICAgfSwgMTAwMClcblxufVxuXG4iXSwibmFtZXMiOlsia2V5IiwiY2hyb21lIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwicmVxdWVzdCIsInNlbmRlciIsInNlbmRSZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJhc3luYyIsImNvdW50IiwibWVzc2FnZUludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJtZXNzYWdlIiwidHlwZSIsInRhYnMiLCJxdWVyeSIsImFjdGl2ZSIsImN1cnJlbnRXaW5kb3ciLCJ0YWIiLCJsYXN0Rm9jdXNlZFdpbmRvdyIsInVuZGVmaW5lZCIsImlkIiwic2VuZE1lc3NhZ2UiLCJjbGVhckludGVydmFsIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9